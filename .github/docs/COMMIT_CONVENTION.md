# 提交规范指南

本项目使用 [Conventional Commits](https://www.conventionalcommits.org/zh-hans/) 规范来标准化提交信息。这有助于自动化版本控制、生成更新日志，并使提交历史更加清晰易读。

## 提交信息格式

```
<类型>[可选的作用域]: <描述>

[可选的正文]

[可选的脚注]
```

### 类型

提交类型必须是以下之一：

| 类型       | 说明                                                       |
| ---------- | ---------------------------------------------------------- |
| `feat`     | 新功能                                                     |
| `fix`      | 修复 Bug                                                   |
| `docs`     | 文档更新                                                   |
| `style`    | 代码格式调整（不影响代码功能，如空格、格式化、缺少分号等） |
| `refactor` | 代码重构（既不是修复 Bug 也不是添加新功能的代码更改）      |
| `perf`     | 性能优化                                                   |
| `test`     | 添加或修改测试                                             |
| `build`    | 构建系统或外部依赖项的更改                                 |
| `ci`       | CI 配置文件和脚本的更改                                    |
| `chore`    | 其他不修改源代码或测试的更改                               |
| `revert`   | 回滚之前的提交                                             |

### 作用域

作用域是可选的，用于提供额外的上下文信息，表明提交影响的模块或组件：

- `core`: 核心模块
- `executor`: 执行器模块
- `scripts`: 脚本模块
- `ui`: 用户界面
- `docs`: 文档
- `deps`: 依赖项
- `config`: 配置文件

### 描述

描述是对变更的简短摘要：

- 使用现在时态，如"change"而不是"changed"或"changes"
- 不要首字母大写
- 结尾不要使用句号

### 正文

正文是可选的，应该包含对变更的详细描述，解释为什么进行此次变更：

- 使用现在时态
- 包括变更的动机，并与之前的行为进行对比

### 脚注

脚注是可选的，用于引用问题跟踪器的 ID 或其他元信息：

- `BREAKING CHANGE: <描述>` 表示引入了破坏性变更
- `Fixes #<问题编号>` 表示修复了特定问题
- `Refs #<问题编号>` 表示引用了特定问题

## 示例

### 添加新功能

```
feat(core): 添加自动识别游戏场景功能

添加基于图像识别的游戏场景自动检测功能，支持主城、副本等场景的识别。
这将使脚本能够根据不同场景执行不同的操作逻辑。

Refs #123
```

### 修复 Bug

```
fix(executor): 修复点击事件在高分辨率屏幕上的坐标偏移问题

将固定像素坐标改为基于屏幕百分比的相对坐标计算，
确保在不同分辨率下点击位置的准确性。

Fixes #456
```

### 文档更新

```
docs: 更新 README 中的安装说明

添加 Windows 和 macOS 系统的详细安装步骤，
并补充常见问题的解决方案。
```

### 重构代码

```
refactor(scripts): 重构任务调度系统

将回调式API改为基于Promise的异步处理方式，
提高代码可读性和错误处理能力。
```

### 破坏性变更

```
feat(core): 重新设计脚本API接口

提供更简洁的链式调用方式，替代原有的配置对象方式。
新API支持更灵活的组合和复用。

BREAKING CHANGE: 脚本API接口完全重新设计，不再兼容旧版本的脚本格式。
升级指南请参考文档。
```

## 工具支持

本项目使用以下工具确保提交规范：

1. **commitlint**: 检查提交信息是否符合规范
2. **husky**: 设置 Git 钩子，在提交前自动运行检查
3. **conventional-changelog**: 根据规范化的提交信息自动生成更新日志

## 提交流程

1. 进行代码更改
2. 暂存更改: `git add .`
3. 提交更改: `git commit`
4. 编写符合规范的提交信息
5. 如果提交信息不符合规范，提交将被拒绝，请修改后重试

## 常见问题

### 如何修改最近的提交信息？

```bash
git commit --amend
```

### 如何在提交时跳过钩子检查？（不推荐）

```bash
git commit --no-verify -m "your message"
```

### 推荐的 Git 工作流

1. 从主分支创建功能分支: `git checkout -b feat/your-feature`
2. 进行开发并提交
3. 推送到远程: `git push origin feat/your-feature`
4. 创建 Pull Request
5. 代码审查后合并到主分支
